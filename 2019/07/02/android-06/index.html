<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">









    <link rel="dns-prefetch" href="https://fonts.googleapis.com">





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Flutter 学习笔记 | 
        
        喜欢书的女孩
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content="我自风情万种，与世无争">
    <meta name="keywords" content>
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg4.gif);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="喜欢书的女孩">
    <meta name="msapplication-starturl" content="http://yoursite.com/2019/07/02/android-06/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="喜欢书的女孩">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com/2019/07/02/android-06/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Flutter 学习笔记 | 喜欢书的女孩">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="我自风情万种，与世无争">
    

    
        <meta property="article:published_time" content="Tue Jul 02 2019 16:03:01 GMT+0800">
        <meta property="article:modified_time" content="Tue Jul 02 2019 16:15:30 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2019/07/02/android-06/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://yoursite.com/2019/07/02/android-06/index.html",
    "headline": "Flutter 学习笔记",
    "datePublished": "Tue Jul 02 2019 16:03:01 GMT+0800",
    "dateModified": "Tue Jul 02 2019 16:15:30 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Emily Chen",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "Hi, nice to meet you"
    },
    "publisher": {
        "@type": "Organization",
        "name": "喜欢书的女孩",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": "",
    "description": "我自风情万种，与世无争",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#1-Views"><span class="post-toc-number">1.</span> <span class="post-toc-text">1. Views</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#例如，你要自定义一个-button-中含有-图片和-文字。"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">例如，你要自定义一个 button 中含有 图片和 文字。</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-Intents-意图"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">#2. Intents 意图</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#3-Async-UI-异步更新UI-runOnUiThread"><span class="post-toc-number">2.</span> <span class="post-toc-text">3. Async UI 异步更新UI (runOnUiThread)</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#4-Project-structure-amp-resources-项目结构-amp-资源"><span class="post-toc-number">3.</span> <span class="post-toc-text">4. Project structure &amp; resources 项目结构&amp;资源</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#5-Activities-and-fragments-界面"><span class="post-toc-number">4.</span> <span class="post-toc-text">5. Activities and fragments 界面</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#6-Layouts-布局"><span class="post-toc-number">5.</span> <span class="post-toc-text">6. Layouts 布局</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-Gesture-detection-and-touch-event-handling-手势和触屏事件处理"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">###7. Gesture detection and touch event handling 手势和触屏事件处理</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#8-Listviews-amp-adapters"><span class="post-toc-number">6.</span> <span class="post-toc-text">8. Listviews &amp; adapters</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#9-Working-with-text-文本框"><span class="post-toc-number">7.</span> <span class="post-toc-text">9. Working with text 文本框</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#10-Form-input-输入框"><span class="post-toc-number">8.</span> <span class="post-toc-text">10. Form input 输入框</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#11-Themes-主题"><span class="post-toc-number">9.</span> <span class="post-toc-text">11. Themes 主题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-Databases-and-local-storage-数据库和本地存储"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">#12. Databases and local storage 数据库和本地存储</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#13-总结"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">#13. 总结</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Flutter 学习笔记
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Emily Chen</strong>
        <span>7月 02, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Flutter 学习笔记&url=http://yoursite.com/2019/07/02/android-06/index.html&pic=http://yoursite.com/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Flutter 学习笔记&url=http://yoursite.com/2019/07/02/android-06/index.html&via=Emily Chen" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2019/07/02/android-06/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com/2019/07/02/android-06/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p><img src="https://upload-images.jianshu.io/upload_images/13588982-dcd13bfd20fa0959.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-03-06 "></p>
<blockquote>
<p>目录：</p>
<blockquote>
<ol>
<li>Views 视图<blockquote>
<p>1.1 widgets<br>1.2 动态更新 UI<br>1.3 增加或者隐藏一个控件<br>1.4 增加动画效果<br>1.5 画布的使用<br>1.6 自定义组件</p>
</blockquote>
</li>
<li>Intents 意图<blockquote>
<p>2.1 指定跳转路线<br>2.2 直接跳到目标<br>2.3 使用插件</p>
</blockquote>
</li>
<li>Async UI  异步更新UI<blockquote>
<p>3.1 与 Android 的区别<br>3.2 async / await<br>3.3 如何移动任务到后台进程<br>3.4 关于网络框架<br>3.5 关于进度条</p>
</blockquote>
</li>
<li>Project structure &amp; resources  项目结构&amp;资源<blockquote>
<p>差异1：图片资源<br>差异2：string.xml<br>差异3：lib 资源，使用框架</p>
</blockquote>
</li>
<li>Activities and fragments  界面<blockquote>
<p>5.1 Activities and fragments VS Widgets<br>5.2 如何监听 Activities 的生命周期事件</p>
</blockquote>
</li>
<li>Layouts 布局<blockquote>
<p>LinearLayout<br>RelativeLayout<br>ScrollView</p>
</blockquote>
</li>
<li>Gesture detection and touch event handling  手势和触屏事件处理<blockquote>
<p>第一，如何处理手机屏幕转动的问题？<br>第二，如何小部件的点击事件？</p>
</blockquote>
</li>
<li>Listviews &amp; adapters</li>
<li>Working with text 文本框<blockquote>
<p>设置字体<br>设置风格</p>
</blockquote>
</li>
<li>Form input 输入框<blockquote>
<p>[1] 增加提示 hint<br>[2] 设置允许输入字符类型</p>
</blockquote>
</li>
<li>Themes 主题</li>
<li>Databases and local storage 数据库和本地存储<blockquote>
<p>[1] Shared Preferences<br>[2] SQLite</p>
</blockquote>
</li>
<li>总结</li>
</ol>
</blockquote>
</blockquote>
<h1 id="1-Views"><a href="#1-Views" class="headerlink" title="1. Views"></a>1. Views</h1><hr>
<p>在 Android 中， 视图是展示在屏幕上的所有的基础。例如 按钮、工具栏、输入框等都是一个视图。在 Flutter 中，Widget 粗略的等同于 Android 中的 View.</p>
<p>Widget 有不同于 Android 视图的生命周期：她们是不可改变的并且只有在需要改变的时候才存在。对比 Android, 视图只绘制一次，并且在它无效之前不会被重新绘制。</p>
<p>如何去理解这句话呢？<br>Widget 只是 UI 的描述，然后编译的时候被对应到引擎的实际视图对象中而显现出来，不需要绘制任何东西。因此，Widget 是轻量级的。<br>这就像是你只是根据 Flutter 的语义描述了这个界面应该是怎么样的，然后这些描述在编译解释对应到引擎下的实际视图对象。</p>
<p>原文描述：<br><code>In Android, the View is the foundation of everything that shows up on the screen. Buttons, toolbars, and inputs, everything is a View. In Flutter, the rough equivalent to a View is a Widget</code></p>
<p><code>widgets have a different lifespan: they are immutable and only exist until they need to be changed. In comparison, an Android view is drawn once and does not redraw until invalidate is called.</code></p>
<p>1.1 widgets</p>
<hr>
<p>[1] StatelessWidgets (静态部件)</p>
<p>静态部件用在不需要变化的地方，例如说 app 的 logo . icon 是放在资源文件下，而不是网络请求获取的； ImageView 的显示是可以写固定的。</p>
<p><code>StatelessWidgets are useful when the part of the user interface you are describing does not depend on anything other than the configuration information in the object. == For example, in Android, this is similar to placing an ImageView with your logo. The logo is not going to change during runtime, so use a StatelessWidget in Flutter.</code></p>
<p>[2] StatefulWidget（状态部件）</p>
<p>状态部件用在动态变化的地方，例如说 ListView 显示服务端返回的数据。</p>
<p><code>If you want to dynamically change the UI based on data received after making an HTTP call or user interaction then you have to work with StatefulWidget and tell the Flutter framework that the widget’s State has been updated so it can update that widget.</code></p>
<p>1.2 动态更新 UI ，例如: 点击 FloatingActionButton 改变 Text 显示的文字。</p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleAppPage extends StatefulWidget &#123;</span><br><span class="line">  SampleAppPage(&#123;Key key&#125;) : super(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _SampleAppPageState extends State&lt;SampleAppPage&gt; &#123;</span><br><span class="line">  // Default placeholder text</span><br><span class="line">  String textToShow = &quot;I Like Flutter&quot;;</span><br><span class="line"></span><br><span class="line">  void _updateText() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      // update the text</span><br><span class="line">      textToShow = &quot;Flutter is Awesome!&quot;;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(&quot;Sample App&quot;),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(child: Text(textToShow)),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: _updateText,</span><br><span class="line">        tooltip: &apos;Update Text&apos;,</span><br><span class="line">        child: Icon(Icons.update),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下：<br><img src="https://upload-images.jianshu.io/upload_images/13588982-0a0c4f2d00c2b84a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-6-1"></p>
<p>1.3 增加或者隐藏一个组件，例如 原本显示一个 Text ,  FloatingActionButton 点击时显示一个 MaterialButton. </p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleAppPage extends StatefulWidget &#123;</span><br><span class="line">  SampleAppPage(&#123;Key key&#125;) : super(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _SampleAppPageState extends State&lt;SampleAppPage&gt; &#123;</span><br><span class="line">  // Default value for toggle</span><br><span class="line">  bool toggle = true;</span><br><span class="line">  void _toggle() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      toggle = !toggle;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _getToggleChild() &#123;</span><br><span class="line">    if (toggle) &#123;</span><br><span class="line">      return Text(&apos;Toggle One&apos;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return MaterialButton(onPressed: () &#123;&#125;, child: Icon(Icons.account_balance),padding: EdgeInsets.only(left: 10.0, right: 10.0));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(&quot;Sample App&quot;),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: _getToggleChild(),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: _toggle,</span><br><span class="line">        tooltip: &apos;Update Text&apos;,</span><br><span class="line">        child: Icon(Icons.update),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果如下：<br><img src="https://upload-images.jianshu.io/upload_images/13588982-3ccf918e880c7057.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-6-1"></p>
<p>1.4 增加动画效果，示例：FloatingActionButton 点击后动画显示出 Icon.</p>
<hr>
<p><code>In Flutter, use an AnimationController which is an Animation&lt;double&gt; that can pause, seek, stop and reverse the animation. It requires a Ticker that signals when vsync happens, and produces a linear interpolation between 0 and 1 on each frame while it’s running. You then create one or more Animations and attach them to the controller.</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(FadeAppTest());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class FadeAppTest extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Fade Demo&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: MyFadeTest(title: &apos;Fade Demo&apos;),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyFadeTest extends StatefulWidget &#123;</span><br><span class="line">  MyFadeTest(&#123;Key key, this.title&#125;) : super(key: key);</span><br><span class="line">  final String title;</span><br><span class="line">  @override</span><br><span class="line">  _MyFadeTest createState() =&gt; _MyFadeTest();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _MyFadeTest extends State&lt;MyFadeTest&gt; with TickerProviderStateMixin &#123;</span><br><span class="line">  AnimationController controller;</span><br><span class="line">  CurvedAnimation curve;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line">    controller = AnimationController(duration: const Duration(milliseconds: 2000), vsync: this);</span><br><span class="line">    curve = CurvedAnimation(parent: controller, curve: Curves.easeIn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(widget.title),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">          child: Container(</span><br><span class="line">              child: FadeTransition(</span><br><span class="line">                  opacity: curve,</span><br><span class="line">                  child: FlutterLogo(</span><br><span class="line">                    size: 100.0,</span><br><span class="line">                  )))),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        tooltip: &apos;Fade&apos;,</span><br><span class="line">        child: Icon(Icons.brush),</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          controller.forward();</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果显示如下，logo 动态淡入。<br><img src="https://upload-images.jianshu.io/upload_images/13588982-36f11e9dc741971f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-6-1"></p>
<p>1.5 画布的使用</p>
<hr>
<p>创建一个手势区域，使用 GestureDetector 去记录触碰路径，CustomPaint 去绘制显示在屏幕上。</p>
<p><code>create a signature area using  GestureDetector to record touches and CustomPaint  to draw on the screen. Here are a few tips:</code></p>
<ul>
<li>Use <code>RenderBox.globalToLocal</code>to convert the <code>DragUpdateDetails</code> provided by <code>GestureDetector.onPanUpdate</code> into relative coordinates</li>
<li>Use a    <code>GestureDetector.onPanEnd</code> gesture handler to record the breaks between strokes.</li>
<li>Mutating the same List won’t automatically trigger a repaint because the <code>CustomPainter</code> constructor arguments are the same. You can trigger a repaint by creating a new List each time a new point is provided.</li>
<li>Use  <code>Canvas.drawLine</code>  to draw a rounded line between each of the recorded points of the signature.</li>
</ul>
<p>–这段文字来源于<a href="[https://stackoverflow.com/questions/46241071/create-signature-area-for-mobile-app-in-dart-flutter](https://stackoverflow.com/questions/46241071/create-signature-area-for-mobile-app-in-dart-flutter)">Collin Jackson</a> 在 stackoverflow 上的回答。更多的源码可以在他的 github 上找到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">class SignaturePainter extends CustomPainter &#123;</span><br><span class="line">  SignaturePainter(this.points);</span><br><span class="line"></span><br><span class="line">  final List&lt;Offset&gt; points;</span><br><span class="line"></span><br><span class="line">  void paint(Canvas canvas, Size size) &#123;</span><br><span class="line">    Paint paint = new Paint()</span><br><span class="line">      ..color = Colors.black</span><br><span class="line">      ..strokeCap = StrokeCap.round</span><br><span class="line">      ..strokeWidth = 5.0;</span><br><span class="line">    for (int i = 0; i &lt; points.length - 1; i++) &#123;</span><br><span class="line">      if (points[i] != null &amp;&amp; points[i + 1] != null)</span><br><span class="line">        canvas.drawLine(points[i], points[i + 1], paint);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  bool shouldRepaint(SignaturePainter other) =&gt; other.points != points;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Signature extends StatefulWidget &#123;</span><br><span class="line">  SignatureState createState() =&gt; new SignatureState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SignatureState extends State&lt;Signature&gt; &#123;</span><br><span class="line">  List&lt;Offset&gt; _points = &lt;Offset&gt;[];</span><br><span class="line"></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return new Stack(</span><br><span class="line">      children: [</span><br><span class="line">        GestureDetector(</span><br><span class="line">          onPanUpdate: (DragUpdateDetails details) &#123;</span><br><span class="line">            RenderBox referenceBox = context.findRenderObject();</span><br><span class="line">            Offset localPosition =</span><br><span class="line">                referenceBox.globalToLocal(details.globalPosition);</span><br><span class="line"></span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _points = new List.from(_points)..add(localPosition);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          onPanEnd: (DragEndDetails details) =&gt; _points.add(null),</span><br><span class="line">        ),</span><br><span class="line">        CustomPaint(painter: SignaturePainter(_points), size: Size.infinite),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class DemoApp extends StatelessWidget &#123;</span><br><span class="line">  Widget build(BuildContext context) =&gt; new Scaffold(body: new Signature());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main() =&gt; runApp(new MaterialApp(home: new DemoApp()));</span><br></pre></td></tr></table></figure>

<p>1.6 自定义组件<br>在 Android 中自定义组件是通过继承 View 或者是 TextView 这类已经拥有一些特性的组件，然后重写父类的方法或者实现接口。<br>在 Flutter 中，构建一个自定义组件是通过组合小部件。有点类似 Android 中的 ViewGroup.</p>
<h2 id="例如，你要自定义一个-button-中含有-图片和-文字。"><a href="#例如，你要自定义一个-button-中含有-图片和-文字。" class="headerlink" title="例如，你要自定义一个 button 中含有 图片和 文字。"></a>例如，你要自定义一个 button 中含有 图片和 文字。</h2><p>In Android, you typically subclass <code>View</code>, or use a pre-existing view, to override and implement methods that achieve the desired behavior.</p>
<p>In Flutter, build a custom widget by  composing smaller widgets (instead of extending them). It is somewhat similar to implementing a custom <code>ViewGroup</code> in Android, where all the building blocks are already existing, but you provide a different behavior—for example, custom layout logic.</p>
<p>For example, how do you build a CustomButton that takes a label in the constructor? Create a CustomButton that composes a RaisedButton with a label, rather than by extending RaisedButton:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class CustomButton extends StatelessWidget &#123;</span><br><span class="line">  final String label;</span><br><span class="line"></span><br><span class="line">  CustomButton(this.label);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return RaisedButton(onPressed: () &#123;&#125;, child: Text(label));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then use CustomButton, just as you’d use any other Flutter widget:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return Center(</span><br><span class="line">    child: CustomButton(&quot;Hello&quot;),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-Intents-意图"><a href="#2-Intents-意图" class="headerlink" title="#2. Intents 意图"></a>#2. Intents 意图</h2><p>2.1  Android 中有显式 Intent 和 隐式 Intent ，作为 Activity 之间的导航仪，实现界面的跳转。但 Flutter 没有与之相对应的概念，由于 Flutter 没有很多的 Activities 和 Fragments ，需要实现 Activity 间的通信。因此，在 Flutter 中实现界面的跳转等操作是通过  Navigator 和 Routes，全都在相同的一个 Activity 中使用。<br>Navigator 和 Routes 的关系：<br>Route 是app 中页面或者界面的抽象，Navigator 是管理 Route 的组件（管理机制类似栈）。<br> <code>A Route is an abstraction for a “screen” or “page” of an app, and a Navigator is a widget that manages routes</code></p>
<p>2.2 实现界面的跳转有几种方式：<br>[1] Specify a Map of route names.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">void main() &#123;</span><br><span class="line">  runApp(MaterialApp(</span><br><span class="line">    home: MyAppHome(), // becomes the route named &apos;/&apos;</span><br><span class="line">    routes: &lt;String, WidgetBuilder&gt; &#123;</span><br><span class="line">      &apos;/a&apos;: (BuildContext context) =&gt; MyPage(title: &apos;page A&apos;),</span><br><span class="line">      &apos;/b&apos;: (BuildContext context) =&gt; MyPage(title: &apos;page B&apos;),</span><br><span class="line">      &apos;/c&apos;: (BuildContext context) =&gt; MyPage(title: &apos;page C&apos;),</span><br><span class="line">    &#125;,</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[2] Directly navigate to a route.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushNamed(&apos;/b&apos;);</span><br></pre></td></tr></table></figure>

<p>[3] 使用插件 android_intent 0.3.0+2<br>这个 插件只支持 android 系统，如果在 ios 中使用会闪退。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if (platform.isAndroid) &#123;</span><br><span class="line">  AndroidIntent intent = AndroidIntent(</span><br><span class="line">      action: &apos;action_view&apos;,</span><br><span class="line">      data: &apos;https://play.google.com/store/apps/details?&apos;</span><br><span class="line">          &apos;id=com.google.android.apps.myapp&apos;,</span><br><span class="line">      arguments: &#123;&apos;authAccount&apos;: currentUserEmail&#125;,</span><br><span class="line">  );</span><br><span class="line">  await intent.launch();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[4] 对于一些常用的调用摄像头或者打开文件夹等操作，需要建立一个原生的平台去集成。<a href="[https://flutter.dev/docs/development/packages-and-plugins/developing-packages](https://flutter.dev/docs/development/packages-and-plugins/developing-packages)">具体参考</a></p>
<h1 id="3-Async-UI-异步更新UI-runOnUiThread"><a href="#3-Async-UI-异步更新UI-runOnUiThread" class="headerlink" title="3. Async UI 异步更新UI (runOnUiThread)"></a>3. Async UI 异步更新UI (runOnUiThread)</h1><hr>
<p>3.1 与 Android 的区别：</p>
<p>Dart 是一个单线程执行的模型，但也支持 Isolates （一种使 Dart 代码运行在另外一个线程的方式），也支持 Event Loop (事件循环) 和  asynchronous programming（异步）。Dart 的机制是除非你开启了一个Isolates，否则代码由 Event Loop 驱动运行在主线程。Dart 的 event loop 相当于 android 的 main looper 。<br>不同于 android 需要一直保持主线程空闲的状态，Flutter 使用 Dart 提供的异步机制，例如 async / await 去完成异步任务。</p>
<p>3.2 具体用法</p>
<p>[1] 使用 async / await   去做一些重量级的操作，例如网络请求等。<br>[2] 网络请求完成后，通过调用设置状态更新 UI，触发一个重建部件的子树并更新数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">import &apos;dart:convert&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:http/http.dart&apos; as http;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleAppPage extends StatefulWidget &#123;</span><br><span class="line">  SampleAppPage(&#123;Key key&#125;) : super(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _SampleAppPageState extends State&lt;SampleAppPage&gt; &#123;</span><br><span class="line">  List widgets = [];</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line"></span><br><span class="line">    loadData();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(&quot;Sample App&quot;),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView.builder(</span><br><span class="line">          itemCount: widgets.length,</span><br><span class="line">          itemBuilder: (BuildContext context, int position) &#123;</span><br><span class="line">            return getRow(position);</span><br><span class="line">          &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget getRow(int i) &#123;</span><br><span class="line">    return Padding(</span><br><span class="line">      padding: EdgeInsets.all(10.0),</span><br><span class="line">      child: Text(&quot;Row $&#123;widgets[i][&quot;title&quot;]&#125;&quot;)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  loadData() async &#123;</span><br><span class="line">    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;</span><br><span class="line">    http.Response response = await http.get(dataURL);</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      widgets = json.decode(response.body);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.3 如何移动任务到后台进程</p>
<p>在 Android 中为了避免阻塞主线程和 ANRs，你可能会使用 AsyncTask、LiveData、IntentService、JobScheduler job、RxJava 管道这些执行在后台线程的调度程序去完成访问网络资源工作。<br>由于 Flutter 是单线程模型和运行一个事件循环机制，因此作为开发人员，不需要担忧线程管理或者产生大量的后台线程。如果你要执行 IO 范围内的任务，例如磁盘访问或网络请求，那你可以用 async/await 。除此之外，如果你需要完成密集型计算的工作让 CPU 一直处于busy 的状态，那么你可以把这个任务移到 Isolate 去避免阻塞事件循环。<br><code>Isolates are separate execution threads that do not share any memory with the main execution memory heap. This means you can’t access variables from the main thread, or update your UI by calling setState(). Unlike Android threads, Isolates are true to their name, and cannot share memory (in the form of static fields, for example).</code></p>
<p>具体示例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">import &apos;dart:convert&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:http/http.dart&apos; as http;</span><br><span class="line">import &apos;dart:async&apos;;</span><br><span class="line">import &apos;dart:isolate&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleAppPage extends StatefulWidget &#123;</span><br><span class="line">  SampleAppPage(&#123;Key key&#125;) : super(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _SampleAppPageState extends State&lt;SampleAppPage&gt; &#123;</span><br><span class="line">  List widgets = [];</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line">    loadData();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  showLoadingDialog() &#123;</span><br><span class="line">    if (widgets.length == 0) &#123;</span><br><span class="line">      return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getBody() &#123;</span><br><span class="line">    if (showLoadingDialog()) &#123;</span><br><span class="line">      return getProgressDialog();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return getListView();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getProgressDialog() &#123;</span><br><span class="line">    return Center(child: CircularProgressIndicator());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(&quot;Sample App&quot;),</span><br><span class="line">        ),</span><br><span class="line">        body: getBody());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ListView getListView() =&gt; ListView.builder(</span><br><span class="line">      itemCount: widgets.length,</span><br><span class="line">      itemBuilder: (BuildContext context, int position) &#123;</span><br><span class="line">        return getRow(position);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">  Widget getRow(int i) &#123;</span><br><span class="line">    return Padding(padding: EdgeInsets.all(10.0), child: Text(&quot;Row $&#123;widgets[i][&quot;title&quot;]&#125;&quot;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  loadData() async &#123;</span><br><span class="line">    ReceivePort receivePort = ReceivePort();</span><br><span class="line">    await Isolate.spawn(dataLoader, receivePort.sendPort);</span><br><span class="line"></span><br><span class="line">    // The &apos;echo&apos; isolate sends its SendPort as the first message</span><br><span class="line">    SendPort sendPort = await receivePort.first;</span><br><span class="line"></span><br><span class="line">    List msg = await sendReceive(sendPort, &quot;https://jsonplaceholder.typicode.com/posts&quot;);</span><br><span class="line"></span><br><span class="line">    setState(() &#123;</span><br><span class="line">      widgets = msg;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // the entry point for the isolate</span><br><span class="line">  static dataLoader(SendPort sendPort) async &#123;</span><br><span class="line">    // Open the ReceivePort for incoming messages.</span><br><span class="line">    ReceivePort port = ReceivePort();</span><br><span class="line"></span><br><span class="line">    // Notify any other isolates what port this isolate listens to.</span><br><span class="line">    sendPort.send(port.sendPort);</span><br><span class="line"></span><br><span class="line">    await for (var msg in port) &#123;</span><br><span class="line">      String data = msg[0];</span><br><span class="line">      SendPort replyTo = msg[1];</span><br><span class="line"></span><br><span class="line">      String dataURL = data;</span><br><span class="line">      http.Response response = await http.get(dataURL);</span><br><span class="line">      // Lots of JSON to parse</span><br><span class="line">      replyTo.send(json.decode(response.body));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future sendReceive(SendPort port, msg) &#123;</span><br><span class="line">    ReceivePort response = ReceivePort();</span><br><span class="line">    port.send([msg, response.sendPort]);</span><br><span class="line">    return response.first;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.4 小主，在 Flutter 可以使用 OkHttp 吗？如何使用呢?<br>事实上， Flutter 有自己的网络请求框架 <a href="[https://pub.dev/packages/http](https://pub.dev/packages/http)">http</a>（等同于 android 的 OkHttp ）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[1]  pubspec.yaml</span><br><span class="line">dependencies:</span><br><span class="line">  ...</span><br><span class="line">  http: ^0.11.3+16</span><br><span class="line"></span><br><span class="line">[2] http.get()</span><br><span class="line">import &apos;dart:convert&apos;;</span><br><span class="line"></span><br><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:http/http.dart&apos; as http;</span><br><span class="line">[...]</span><br><span class="line">  loadData() async &#123;</span><br><span class="line">    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;</span><br><span class="line">    http.Response response = await http.get(dataURL);</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      widgets = json.decode(response.body);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.5 小主，那如何添加进度条呢？<br>Android 中有 ProgressBar ， Flutter 中有 ProgressIndicator。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">showLoadingDialog() &#123;</span><br><span class="line">  return widgets.length == 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getBody() &#123;</span><br><span class="line">  if (showLoadingDialog()) &#123;</span><br><span class="line">    return getProgressDialog();</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getProgressDialog() &#123;</span><br><span class="line">  return Center(child: CircularProgressIndicator());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-Project-structure-amp-resources-项目结构-amp-资源"><a href="#4-Project-structure-amp-resources-项目结构-amp-资源" class="headerlink" title="4. Project structure &amp; resources 项目结构&amp;资源"></a>4. Project structure &amp; resources 项目结构&amp;资源</h1><hr>
<p>新创建的 Flutter Project 的结构是如下图的。<br><img src="https://upload-images.jianshu.io/upload_images/13588982-0351a3548e61063e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-6-17"></p>
<p>对比 Android Project 的结构：<br><img src="https://upload-images.jianshu.io/upload_images/13588982-c5c9823def3c9e3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-6-17"></p>
<p>差异1: 小主，没有 res 资源包，那我的图片等资源文件应该放在哪里？怎么调用呢？<br>Android 会对资源（resources）和资产（assets）进行分类，但在 Flutter 中只有assets 的概念。当然，也就没有 dps 之分， 而是用像素区分。<br><img src="https://upload-images.jianshu.io/upload_images/13588982-bf866bd2df4d0862.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2019-6-17"><br>怎么添加图片？<br>[1] 首先在项目根目录下创建 images 文件夹，<br>[2] 然后把图片复制黏贴到 images 目录下，<br>[3] 其次在 pubspec.yaml ，引入 assets: - images/my_icon.jpeg，<br>[4] 最后在代码中调用 @override<br>Widget build(BuildContext context) {<br>  return Image.asset(“images/my_image.png”);<br>}<br>区分不同像素的图片：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">images/my_icon.png       // Base: 1.0x image</span><br><span class="line">images/2.0x/my_icon.png  // 2.0x image</span><br><span class="line">images/3.0x/my_icon.png  // 3.0x image</span><br></pre></td></tr></table></figure>

<p>差异2 ： 小主小主，还有一个问题呐， string.xml 的字符在 Flutter 中是怎么使用的呢？<br>Flutter 没有等同于 Android 的  string.xml ， 因此对于项目的常量字符串，你可以创建一个 Strings 类，然后在代码中调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.Strings 类</span><br><span class="line"> class Strings &#123;</span><br><span class="line">  static String welcomeMessage = &quot;Hello world !&quot;;</span><br><span class="line">&#125;</span><br><span class="line">2.代码中调用</span><br><span class="line">Text(Strings.welcomeMessage)</span><br></pre></td></tr></table></figure>

<p>差异3: 小主小主，我前面看了你使用网络请求框架，那我以前用的视频播放、Json 解析这些开源框架都不用了，那我岂不是全部要手动造轮子？？？<br>是的，赶紧造轮子去吧（偷笑），多开源几个，为 Flutter 做贡献（一脸认真滴样子）！所有的 Flutter 开源项目 在这 <a href="[https://pub.dev/flutter/packages/](https://pub.dev/flutter/packages/)">Pub</a>~</p>
<h1 id="5-Activities-and-fragments-界面"><a href="#5-Activities-and-fragments-界面" class="headerlink" title="5. Activities and fragments 界面"></a>5. Activities and fragments 界面</h1><hr>
<p>5.1 Activities and fragments VS Widgets<br>我们都知道，在 Android 中，Activity 扮演者用户交互接口的角色，即用户界面。Fragment 是行为或者用户界面的碎片，用于模块化代码，组成复杂的界面。在 Flutter ，这两个概念都集中到了 Widgets 中。任何一切都是一个小部件（widget），不同的路由（Routes） 代表不同的页面。</p>
<p>5.2 如何监听 Activities 的生命周期事件<br>在 Android 中，你可以重写 Activity 的方法去捕获自身 Activity 的生命周期事件，或者在 Application 注册一个 ActivityLifecycleCallbacks。在 Flutter 中，因为没有 Activity 的概念，因此此路不通，提供的新方法是通过 WidgetsBinding 观察者和监听 didChangeAppLifecycleState（） 变化事件。<br>可以观察到的生命周期事件：<br>[1] <code>inactive</code>不活跃的：处于不活跃状态不能接收用户输入。这种情况是工作在 IOS 系统上时产生的，Android 中没有对应的事件。<br>[2] <code>paused</code> 暂停中止的：程序对用户不可见，不响应用户操作，运行在后台，这相当于 Android 的 onPause().<br>[3] <code>resumed</code> 重新建立，恢复：应用程序对用户可见，并且可以接收用户输入。这相当于 Android 的 onResume().<br>[4] <code>suspending</code> 悬浮：应用程序暂停片刻，相当于 Android 的 onStop()。这种情况不会在 IOS 系统产生。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/widgets.dart&apos;;</span><br><span class="line"></span><br><span class="line">class LifecycleWatcher extends StatefulWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  _LifecycleWatcherState createState() =&gt; _LifecycleWatcherState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _LifecycleWatcherState extends State&lt;LifecycleWatcher&gt; with WidgetsBindingObserver &#123;</span><br><span class="line">  AppLifecycleState _lastLifecycleState;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void initState() &#123;</span><br><span class="line">    super.initState();</span><br><span class="line">    WidgetsBinding.instance.addObserver(this);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void dispose() &#123;</span><br><span class="line">    WidgetsBinding.instance.removeObserver(this);</span><br><span class="line">    super.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  void didChangeAppLifecycleState(AppLifecycleState state) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _lastLifecycleState = state;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    if (_lastLifecycleState == null)</span><br><span class="line">      return Text(&apos;This widget has not observed any lifecycle changes.&apos;, textDirection: TextDirection.ltr);</span><br><span class="line"></span><br><span class="line">    return Text(&apos;The most recent lifecycle state this widget observed was: $_lastLifecycleState.&apos;,</span><br><span class="line">        textDirection: TextDirection.ltr);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(Center(child: LifecycleWatcher()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="6-Layouts-布局"><a href="#6-Layouts-布局" class="headerlink" title="6. Layouts 布局"></a>6. Layouts 布局</h1><hr>
<p>【1】 LinearLayout<br>水平线性布局  == Row widget（行）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return Row(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Text(&apos;Row One&apos;),</span><br><span class="line">      Text(&apos;Row Two&apos;),</span><br><span class="line">      Text(&apos;Row Three&apos;),</span><br><span class="line">      Text(&apos;Row Four&apos;),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>垂直线性布局 == Column widget（列）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return Column(</span><br><span class="line">    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Text(&apos;Column One&apos;),</span><br><span class="line">      Text(&apos;Column Two&apos;),</span><br><span class="line">      Text(&apos;Column Three&apos;),</span><br><span class="line">      Text(&apos;Column Four&apos;),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【2】 RelativeLayout<br>相对布局是根据组件与组件之间相对关系进行排布，这在 Flutter 中是几乎没有直接与之相对的实现方式，不过你可以通过组合 Row、Column 和 Stack 等小部件去实现，也可以为部件构造函数指定规则去规定孩子部件与父类部件的相对关系。<br>【3】 ScrollView<br>在 Flutter 中 a ListView widget 是包含  ScrollView 和 Android 中的 ListView.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return ListView(</span><br><span class="line">    children: &lt;Widget&gt;[</span><br><span class="line">      Text(&apos;Row One&apos;),</span><br><span class="line">      Text(&apos;Row Two&apos;),</span><br><span class="line">      Text(&apos;Row Three&apos;),</span><br><span class="line">      Text(&apos;Row Four&apos;),</span><br><span class="line">    ],</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-Gesture-detection-and-touch-event-handling-手势和触屏事件处理"><a href="#7-Gesture-detection-and-touch-event-handling-手势和触屏事件处理" class="headerlink" title="###7. Gesture detection and touch event handling 手势和触屏事件处理"></a>###7. Gesture detection and touch event handling 手势和触屏事件处理</h2><p> 第一，如何处理手机屏幕转动的问题？<br>In AndroidManifest.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:configChanges=&quot;orientation|screenSize&quot;</span><br></pre></td></tr></table></figure>

<p> 第二，如何小部件的点击事件？<br>情况1，小部件默认有点击事件，例如 RaisedButton.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return RaisedButton(</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        print(&quot;click&quot;);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(&quot;Button&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>情况2，小部件没有自带点击点击事件，在部件外层添加 GestureDetector ，增加 onTap 方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">        body: Center(</span><br><span class="line">      child: GestureDetector(</span><br><span class="line">        child: FlutterLogo(</span><br><span class="line">          size: 200.0,</span><br><span class="line">        ),</span><br><span class="line">        onTap: () &#123;</span><br><span class="line">          print(&quot;tap&quot;);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="8-Listviews-amp-adapters"><a href="#8-Listviews-amp-adapters" class="headerlink" title="8. Listviews &amp; adapters"></a>8. Listviews &amp; adapters</h1><hr>
<p>在 Android 中使用 Listviews，首先创建一个 adapter ，然后将 adapter 传入 listview ，listview 的每一行与 adapter 返回的相对应。然而，你必须确保你有回收你的行，不然会出现很多的小故障和记忆问题。</p>
<p>在 Flutter 中，由于小部件是不可变模式，即静态模式，要动态添加数据填充，你需要增加一系列的小部件到 listview . 而 Flitter 负责保证滑动的流畅性和速度。<br>同样的，如果需要为 listview 添加点击事件呢，应该如何操作？<br>在小部件外层增加一个   <code>GestureDetector</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleAppPage extends StatefulWidget &#123;</span><br><span class="line">  SampleAppPage(&#123;Key key&#125;) : super(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _SampleAppPageState extends State&lt;SampleAppPage&gt; &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(&quot;Sample App&quot;),</span><br><span class="line">      ),</span><br><span class="line">      body: ListView(children: _getListData()),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _getListData() &#123;</span><br><span class="line">    List&lt;Widget&gt; widgets = [];</span><br><span class="line">    for (int i = 0; i &lt; 100; i++) &#123;</span><br><span class="line">      widgets.add(GestureDetector(</span><br><span class="line">        child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(10.0),</span><br><span class="line">            child: Text(&quot;Row $i&quot;)),</span><br><span class="line">        onTap: () &#123;</span><br><span class="line">          print(&apos;row tapped&apos;);</span><br><span class="line">        &#125;,</span><br><span class="line">      ));</span><br><span class="line">    &#125;</span><br><span class="line">    return widgets;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="9-Working-with-text-文本框"><a href="#9-Working-with-text-文本框" class="headerlink" title="9. Working with text 文本框"></a>9. Working with text 文本框</h1><hr>
<p>[1] 设置字体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1. In the pubspec.yaml file</span><br><span class="line">fonts:</span><br><span class="line">   - family: MyCustomFont</span><br><span class="line">     fonts:</span><br><span class="line">       - asset: fonts/MyCustomFont.ttf</span><br><span class="line">       - style: italic</span><br><span class="line">2. assign the font to your Text widget</span><br><span class="line">@override</span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  return Scaffold(</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      title: Text(&quot;Sample App&quot;),</span><br><span class="line">    ),</span><br><span class="line">    body: Center(</span><br><span class="line">      child: Text(</span><br><span class="line">        &apos;This is a custom font text&apos;,</span><br><span class="line">        style: TextStyle(fontFamily: &apos;MyCustomFont&apos;),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[2] 设置风格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">*   color</span><br><span class="line">*   decoration</span><br><span class="line">*   decorationColor</span><br><span class="line">*   decorationStyle</span><br><span class="line">*   fontFamily</span><br><span class="line">*   fontSize</span><br><span class="line">*   fontStyle</span><br><span class="line">*   fontWeight</span><br><span class="line">*   hashCode</span><br><span class="line">*   height</span><br><span class="line">*   inherit</span><br><span class="line">*   letterSpacing</span><br><span class="line">*   textBaseline</span><br><span class="line">*   wordSpacing</span><br></pre></td></tr></table></figure>

<h1 id="10-Form-input-输入框"><a href="#10-Form-input-输入框" class="headerlink" title="10. Form input 输入框"></a>10. Form input 输入框</h1><hr>
<p>[1] 增加提示 <code>hint</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">body: Center(</span><br><span class="line">  child: TextField(</span><br><span class="line">    decoration: InputDecoration(hintText: &quot;Please Input number&quot;),</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>[2] 设置允许输入字符类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(SampleApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SampleAppPage extends StatefulWidget &#123;</span><br><span class="line">  SampleAppPage(&#123;Key key&#125;) : super(key: key);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  _SampleAppPageState createState() =&gt; _SampleAppPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class _SampleAppPageState extends State&lt;SampleAppPage&gt; &#123;</span><br><span class="line">  String _errorText;</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(&quot;Sample App&quot;),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: TextField(</span><br><span class="line">          onSubmitted: (String text) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              if (!isEmail(text)) &#123;</span><br><span class="line">                _errorText = &apos;Error: This is not an email&apos;;</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                _errorText = null;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          decoration: InputDecoration(hintText: &quot;This is a hint&quot;, errorText: _getErrorText()),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _getErrorText() &#123;</span><br><span class="line">    return _errorText;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  bool isEmail(String em) &#123;</span><br><span class="line">    String emailRegexp =</span><br><span class="line">        r&apos;^(([^&lt;&gt;()[\]\\.,;:\s@\&quot;]+(\.[^&lt;&gt;()[\]\\.,;:\s@\&quot;]+)*)|(\&quot;.+\&quot;))@((\[[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]&#123;2,&#125;))$&apos;;</span><br><span class="line"></span><br><span class="line">    RegExp regExp = RegExp(emailRegexp);</span><br><span class="line"></span><br><span class="line">    return regExp.hasMatch(em);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="11-Themes-主题"><a href="#11-Themes-主题" class="headerlink" title="11. Themes 主题"></a>11. Themes 主题</h1><hr>
<p>最钟意的环节终于来了，我真是一个有审美要求的程序媛！(隔壁穿着格子衫，牛仔裤的她投来鄙视的一眼👀)<br>曾经我为了让我的 app 运用 Material Design 风格的组件，把所有与之发生冲突的依赖包换成了手造轮子或者找另外的开源替换。<br>对于 Flutter ，开箱即用的各种 Material Design Style 小部件，先看看怎么用吧。<br>在 Flutter 最上层部件声明 theme ，就像这样👇</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class SampleApp extends StatelessWidget &#123;</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return MaterialApp(</span><br><span class="line">      title: &apos;Sample App&apos;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">        textSelectionColor: Colors.red</span><br><span class="line">      ),</span><br><span class="line">      home: SampleAppPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-Databases-and-local-storage-数据库和本地存储"><a href="#12-Databases-and-local-storage-数据库和本地存储" class="headerlink" title="#12. Databases and local storage 数据库和本地存储"></a>#12. Databases and local storage 数据库和本地存储</h2><p>[1] Shared Preferences<br>在 Android 中， 以 key-value 的形式把小规模的数据存入。<br>在 Flutter 中，需要加入 <a href="https://pub.dev/packages/shared_preferences" target="_blank" rel="noopener">shared_preferences 0.5.3+</a> 插件，它包括 Android 的 Shared Preferences 和 IOS 的 NSUserDefaults.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import &apos;package:flutter/material.dart&apos;;</span><br><span class="line">import &apos;package:shared_preferences/shared_preferences.dart&apos;;</span><br><span class="line"></span><br><span class="line">void main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">    MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        body: Center(</span><br><span class="line">          child: RaisedButton(</span><br><span class="line">            onPressed: _incrementCounter,</span><br><span class="line">            child: Text(&apos;Increment Counter&apos;),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_incrementCounter() async &#123;</span><br><span class="line">  SharedPreferences prefs = await SharedPreferences.getInstance();</span><br><span class="line">  int counter = (prefs.getInt(&apos;counter&apos;) ?? 0) + 1;</span><br><span class="line">  print(&apos;Pressed $counter times.&apos;);</span><br><span class="line">  prefs.setInt(&apos;counter&apos;, counter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>[2] SQLite<br>同样的，需要使用 <a href="https://pub.dev/packages/sqflite" target="_blank" rel="noopener">sqflite 1.1.5</a> 插件，具体用法参考 <a href="https://pub.dev/packages/sqflite" target="_blank" rel="noopener">sqflite 1.1.5</a> .</p>
<h2 id="13-总结"><a href="#13-总结" class="headerlink" title="#13. 总结"></a>#13. 总结</h2><p>文章内容来自学习 <a href="https://flutter.dev/docs/get-started/flutter-for/android-devs" target="_blank" rel="noopener">Flutter官网</a> 的知识，仅做学习记录的用处，不做商业用途。文中的中文是自己翻译的，由于本人水平有限，故把部分经典英文原文也贴出，免得误人子弟，故若有不当之处请指出，谢谢！</p>
<p><img src="https://upload-images.jianshu.io/upload_images/13588982-e772571be616ca05.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="二维码"></p>
<p><code>作者：Emily CH</code><br><code>2019年6月7日</code></p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/07/03/LeetCode-01/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/07/02/android-05/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Emily Chen's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        chenxiaoyanemile@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/07/">七月 2019<span class="sidebar_archives-count">24</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;喜欢书的女孩
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
